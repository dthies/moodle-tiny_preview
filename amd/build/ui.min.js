define("tiny_preview/ui",["exports","tiny_preview/modal","core/notification","core_filters/events","./options","tiny_preview/repository"],(function(_exports,_modal,_notification,_events,Options,TinyPreviewRepository){var e;
/**
   * Tiny Preview user interface implementation.
   *
   * @module      tiny_preview/ui
   * @copyright   2022 Daniel Thies <dethies@gmail.com>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.handleAction=void 0,_modal=(e=_modal)&&e.__esModule?e:{default:e},Options=_interopRequireWildcard(Options),TinyPreviewRepository=_interopRequireWildcard(TinyPreviewRepository);_exports.handleAction=editor=>{displayDialogue(editor)};const getTemplateContext=(editor,data)=>TinyPreviewRepository.filterContent(Options.getContextId(editor),editor.getBody().innerHTML).then((result=>Object.assign(result,{elementid:editor.id,showOptions:!1},data))).catch(_notification.exception),displayDialogue=async function(editor){let data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const modal=await _modal.default.create({type:_modal.default.TYPE,templateContext:await getTemplateContext(editor,data),large:!0}),root=(await modal.getRoot())[0];await modal.show(),breakHyperLinks(root),(0,_events.notifyFilterContentUpdated)(root)},breakHyperLinks=element=>{element.querySelectorAll('a:not([target="_blank"])').forEach((link=>{link.setAttribute("target","_blank")}))}}));

//# sourceMappingURL=ui.min.js.map